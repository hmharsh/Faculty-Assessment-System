<!DOCTYPE html>
<html lang="en">
<head>
  <title>Welcome</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="../bower_components/angular/angular.min.js"></script>
<script src="../bower_components/angular-route/angular-route.min.js"></script>
<script src="../bower_components/angular-ui-router/release/angular-ui-router.min.js"></script>


</head>
<body onload = "a()">
  <a href = "/mainmenu"><h4>Go Back To Home</h4></a>
   </br>
	<h1 align = "center">University of Indore
Devi Ahilya University, Indore
</h1>
<h2 align = "center">Annual Self-Assessment for the Performance Based Appraisal System (PBAS)</h2>
<h3 align = "center"><b>PART A : GENERAL INFORMATION </b></h3>
	 </br>
   <div ng-app="myApp" ng-controller="customersCtrl">

     
<form class = "form-horizontal" role = "form" method = "post" action = "/updatedata">



<input type = "hidden" id = "mytext" name = "userid"></input>
<!-- 


   <div class = "form-group">
      <label for = "Name" class = "col-sm-2 control-label">Session</label>
    
      <div class = "col-sm-8">
        //data from angular variable session_data
       <select id = "session" class="form-control" name = "session" required  value  = {{data[0].session}}> 
            <option value="hourly">hourly</option>
            <option value="weekly">weekly</option>
            <option value="Semester">Semester wise </option>
            <option value="yearly">yearly</option>
          </select>
<select ng-model="selectedName" id = "session" class="form-control" name = "session" ng-options="x for x in session_data[displaylike]" ng-model="selectedOption" ng-selected ="true"></select>
    <select ng-options="obj.value as obj.text for obj in session_data"></select>
<select ng-model="selectedCar" id = "session" class="form-control" name = "session_dropdown" ng-options="y.displaylike for (x, y) in session_data" onchange = "ondropdownchange()">
</select> 
<input type = "hidden" id = "ses" ng-model = 'selectedCar.displaylike' name = "session"></input>
<input type = "hidden"  value  = {{data[0].session}} id = "sess"></input>

<select ng-options="obj.displaylike as obj.displaylike for obj in session_data"></select>
<select ng-options="obj.displaylike for obj in session_data track by obj.displaylike"> 
</select>

      </div>
   </div>
    -->


   <div class = "form-group">
      <label for = "Name" class = "col-sm-2 control-label">Name</label>
		
      <div class = "col-sm-8">
         <input type = "text" required class = "form-control" name = "name"  value  = {{data[0].name}}>
      </div>
   </div>
   
   <div class = "form-group">
      <label for = "Father’s Name" class = "col-sm-2 control-label">Father’s Name</label>
		
      <div class = "col-sm-8">
         <input type = "text" required class = "form-control" name = "father" value  = {{data[0].father}}>
      </div>
   </div>
   <div class = "form-group">
      <label for = "Mother’s Name" class = "col-sm-2 control-label"> Mother’s Name</label>
		
      <div class = "col-sm-8">
         <input type = "text" required class = "form-control" name = "mother" value  = {{data[0].mother}}>
      </div>
   </div>  




   <div class = "form-group">
      <label for = "Department" class = "col-sm-2 control-label"> Department</label>
		
      <div class = "col-sm-8">
         <input type = "text" required class = "form-control" name = "department" value  = {{data[0].department}}>
      </div>
   </div>  



   <div class = "form-group">
      <label for = "Current Designation" required class = "col-sm-2 control-label">Current Designation </label>
		
      <div class = "col-sm-8">
         <input type = "text" required class = "form-control" name = "designation" value  = {{data[0].designation}}>
      </div>
   </div>  

   <div class = "form-group">
      <label for = "Grade Pay" required class = "col-sm-2 control-label"> Grade Pay</label>
		
      <div class = "col-sm-8">
         <input type = "text" required class = "form-control" name = "pay" value  = {{data[0].pay}}>
      </div>
   </div>  






   <div class = "form-group">
      <label for = "Date of last Promotion" required class = "col-sm-2 control-label"> Date of last Promotion</label>
      <div class = "col-sm-8">
         <input type = "date" required id="datefield"  class = "form-control" name = "last_promo" value  = {{data[0].last_promo}} >
      </div>
   </div>  




   <div class = "form-group">
      <label for = "Address for correspondence" required class = "col-sm-2 control-label"> Address for correspondence</label>
     <div class = "col-sm-8">
        <input type = "text" id = "afc" required class = "form-control" name = "caddress" value  = {{data[0].caddress}}>
      </div>
   </div>  
</br>
<h4 align = "center" onclick = "sameaddress()">click here for Permanant address is same as above</h4>
</br>
   <div class = "form-group">
      <label for = "Address for correspondence" required class = "col-sm-2 control-label">Permanent  Address</label>
     <div class = "col-sm-8">
        <input type = "text" required id = "pa" class = "form-control" name = "paddress" value  = {{data[0].paddress}} >
      </div>
   </div>  
      <div class = "form-group">
      <label for = "Telephone No" required class = "col-sm-2 control-label">Telephone No</label>
     <div class = "col-sm-8">
     <input type = "number" required class = "form-control" name = "telephone" value  = {{data[0].telephone}}    oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
   
    maxlength = "10" id = "tel" onblur = "checklen()">
      </div>
   </div>  

   <div class = "form-group">
      <label for = "email" required class = "col-sm-2 control-label">E-mail</label>
     <div class = "col-sm-8">
         <input type = "email" required class = "form-control" name = "email" value  = {{data[0].email}}>
      </div>
   </div>  












    </div>













   

   </br>
   <div  class = "form-group">
      <div class = "col-sm-offset-6 col-sm-3">
         <button type = "submit" class = "btn btn-default" >Submit</button>
       <!--   <a href = "/table" class = "butto">Tabular View</a> -->
      </div>
   </div>










 





	
</form>

</div>
<script>
/*var app = angular.module('myApp', []);
app.controller('customersCtrl', function($scope,$http) {
   
    $http.get("http://localhost:3000/data/viewdata")
    
    .then(function (response) {$scope.data = response.data;});


  };
});
*/
function checklen()
{

 if(document.getElementById("tel").value.length<10){
  alert("length of contact number must be 10");

 }
}
function sameaddress()
{
 document.getElementById("pa").value = strUser = document.getElementById("afc").value;

}


var app = angular.module('myApp', [])
app.controller('customersCtrl',function($scope,$http){

  $http.get("/data/viewdata/"+getParameterByName('val')).then
  (
    function(res){
      $scope.data = res.data;
       //$scope.selectedCar = 
    },
    function (res) {
      $scope.name = "error"+res.status+" ";
    }
    );



      $http.get("/data/session").then
      (
        function(res){
          $scope.session_data = res.data;
          
        },
        function (res) {
          $scope.name = "error"+res.status+" ";

        }
        );








});



</script>
<script>

function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
}
function a(){


  var today = new Date();
var dd = today.getDate();
var mm = today.getMonth()+1; //January is 0!
var yyyy = today.getFullYear();
 if(dd<10){
        dd='0'+dd
    } 
    if(mm<10){
        mm='0'+mm
    } 

today = yyyy+'-'+mm+'-'+dd;
document.getElementById("datefield").setAttribute("max", today);





  var v = getParameterByName('val')
  document.getElementById("mytext").value = v;

setTimeout(function() {
 //alert(document.getElementById("sess").value);

var v = document.getElementById("sess").value;

s = document.getElementById("session");
 //alert(v);
//document.getElementById("ses").value = document.getElementById("sess").value


    for ( var i = 0; i < s.options.length; i++ ) {
      //alert(s.options[i].label + "and" + v);
        if ( s.options[i].label == v ) {
            s.options[i].selected = true;
            return;
        }
    }

 

   }, 500);




   document.getElementById("uid").value = v;











/*
setTimeout(function() {
//code here to be called after 5ms of page oad if to update the data

 alert(document.getElementById("sess").value);

var v = document.getElementById("sess").value;

s = document.getElementById("session");
 //alert(v);
//document.getElementById("ses").value = document.getElementById("sess").value


    for ( var i = 0; i < s.options.length; i++ ) {
      //alert(s.options[i].label + "and" + v);
        if ( s.options[i].label == v ) {
            s.options[i].selected = true;
            return;
        }
    }

 
   }, 500);
*/






















}



function ondropdownchange()
{
  var e = document.getElementById("session");
var strUser = e.options[e.selectedIndex].text;
document.getElementById("ses").value = strUser;

}
</script>


</body>
</html>
